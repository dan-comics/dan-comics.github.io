<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dan Comics - By Evan</title>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Neue', 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            transition: background 0.5s ease;
        }

        body.custom-bg {
            background: url('Website/FLL - Band of Bots/Background.JPG') center center;
            background-size: cover;
            background-attachment: fixed;
        }

        body.custom-bg::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.3);
            z-index: -1;
        }

        .header {
            background: url('Website/Webbackground.jpg') center center;
            background-size: cover;
            padding: 30px 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
            min-height: 200px;
        }

        .header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
            z-index: 0;
        }

        .header h1 {
            font-family: 'Bangers', cursive;
            font-size: 4em;
            color: #fff;
            text-shadow: 4px 4px 0 #000,
                         6px 6px 10px rgba(0,0,0,0.8),
                         -2px -2px 0 #FF1493,
                         2px -2px 0 #00CED1,
                         -2px 2px 0 #FFD700;
            letter-spacing: 3px;
            position: relative;
            z-index: 1;
            animation: bounce 2s infinite;
        }

        .subtitle {
            font-size: 1.5em;
            color: #fff;
            margin-top: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8),
                         0 0 10px rgba(0,0,0,0.6);
            position: relative;
            z-index: 1;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Main Tab Navigation */
        .tab-container {
            background: rgba(255,255,255,0.95);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }

        .main-tabs {
            display: flex;
            padding: 0;
            margin: 0;
            min-width: min-content;
        }

        .tab-button {
            flex: 0 0 auto;
            padding: 20px 30px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            font-family: 'Bangers', cursive;
            font-size: 1.3em;
            letter-spacing: 1px;
            border-bottom: 5px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
            position: relative;
        }

        .tab-button:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }

        .tab-button.active {
            background: white;
            border-bottom-color: #FF6347;
            transform: translateY(0);
        }

        .tab-icon {
            font-size: 1.5em;
            margin-right: 8px;
            display: inline-block;
        }

        /* Sub-tabs */
        .sub-tab-container {
            background: rgba(255,255,255,0.9);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            padding: 15px 20px;
            display: none;
            overflow-x: auto;
            white-space: nowrap;
        }

        .sub-tab-container.active {
            display: block;
        }

        .sub-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: nowrap;
        }

        .sub-tab-button {
            padding: 12px 25px;
            border: 3px solid #000;
            background: #FFD700;
            cursor: pointer;
            font-family: 'Comic Neue', cursive;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 10px;
            box-shadow: 3px 3px 0 #000;
            transition: all 0.2s;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .sub-tab-button:hover {
            transform: translate(-2px, -2px);
            box-shadow: 5px 5px 0 #000;
        }

        .sub-tab-button.active {
            background: #FF6347;
            color: white;
            transform: translate(1px, 1px);
            box-shadow: 2px 2px 0 #000;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .comics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .comic-card {
            background: white;
            border: 5px solid #000;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            position: relative;
        }

        .comic-card:hover {
            transform: translate(-4px, -4px) rotate(-2deg);
            box-shadow: 12px 12px 0 rgba(0,0,0,0.4);
        }

        .comic-card img {
            width: 100%;
            height: 350px;
            object-fit: cover;
            display: block;
            border-bottom: 3px solid #000;
        }

        .comic-title {
            padding: 15px;
            background: #FFE082;
            font-weight: bold;
            text-align: center;
            color: #333;
            font-size: 1.1em;
        }

        .about-section {
            background: white;
            border: 5px solid #000;
            border-radius: 15px;
            padding: 40px;
            margin: 40px auto;
            max-width: 800px;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
        }

        .about-section h2 {
            font-family: 'Bangers', cursive;
            font-size: 2.5em;
            color: #FF6347;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 0 #FFD700;
        }

        .about-section p {
            font-size: 1.3em;
            line-height: 1.8;
            color: #333;
            text-align: center;
        }

        .footer {
            background: #333;
            color: #FFD700;
            text-align: center;
            padding: 30px 20px;
            font-size: 1.2em;
            font-family: 'Bangers', cursive;
            letter-spacing: 2px;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.3);
        }

        /* Lightbox Styles */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            animation: zoomIn 0.3s;
        }

        @keyframes zoomIn {
            from {
                transform: scale(0.5);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .lightbox img {
            max-width: 100%;
            max-height: 90vh;
            border: 5px solid #FFD700;
            box-shadow: 0 0 50px rgba(255,215,0,0.5);
        }

        .lightbox-close {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #FF6347;
            color: white;
            border: 3px solid #000;
            padding: 10px 20px;
            font-family: 'Bangers', cursive;
            font-size: 1.5em;
            cursor: pointer;
            border-radius: 10px;
            box-shadow: 3px 3px 0 #000;
            z-index: 1001;
        }

        .lightbox-nav {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,215,0,0.9);
            border: 3px solid #000;
            padding: 15px 12px;
            font-size: 1.8em;
            cursor: pointer;
            border-radius: 50%;
            font-family: 'Bangers', cursive;
            box-shadow: 3px 3px 0 #000;
            transition: all 0.2s;
            z-index: 1001;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-nav:hover {
            background: #FFD700;
            transform: translateY(-50%) scale(1.15);
        }

        .lightbox-prev {
            left: 20px;
        }

        .lightbox-next {
            right: 20px;
        }

        .hidden {
            display: none;
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 2em;
            color: white;
            font-family: 'Bangers', cursive;
            background: rgba(0,0,0,0.5);
            border-radius: 15px;
            margin: 20px;
        }

        .empty-message {
            text-align: center;
            padding: 60px 20px;
            font-size: 1.8em;
            color: white;
            font-family: 'Bangers', cursive;
            background: rgba(0,0,0,0.5);
            border-radius: 15px;
            margin: 20px;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .container {
                padding: 30px 15px;
            }

            .comics-grid {
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
                gap: 20px;
            }

            .comic-card img {
                height: 300px;
            }

            .tab-button {
                padding: 18px 25px;
                font-size: 1.2em;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5em;
            }

            .subtitle {
                font-size: 1.2em;
            }

            .tab-button {
                padding: 15px 20px;
                font-size: 1.1em;
            }

            .tab-icon {
                font-size: 1.3em;
                margin-right: 5px;
            }

            .sub-tab-button {
                padding: 10px 20px;
                font-size: 1em;
            }

            .comics-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .comic-card img {
                height: auto;
                min-height: 250px;
            }

            .about-section {
                padding: 25px;
                margin: 30px 10px;
            }

            .about-section h2 {
                font-size: 2em;
            }

            .about-section p {
                font-size: 1.1em;
            }

            .lightbox-close {
                top: 10px;
                right: 10px;
                font-size: 1.2em;
                padding: 8px 15px;
            }

            .lightbox-nav {
                padding: 10px 8px;
                font-size: 1.4em;
                width: 45px;
                height: 45px;
            }

            .lightbox-prev {
                left: 10px;
            }

            .lightbox-next {
                right: 10px;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 2em;
                letter-spacing: 1px;
            }

            .subtitle {
                font-size: 1em;
            }

            .tab-button {
                padding: 12px 15px;
                font-size: 1em;
            }

            .lightbox-content {
                max-width: 95%;
            }

            .footer {
                font-size: 1em;
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>DAN COMICS</h1>
        <div class="subtitle">Created by Evan from San Diego</div>
    </div>

    <!-- Main Tab Navigation -->
    <div class="tab-container">
        <div class="main-tabs" id="mainTabs">
            <!-- Tabs will be loaded here -->
        </div>
    </div>

    <!-- Sub-tab Navigation (for nested folders) -->
    <div class="sub-tab-container" id="subTabContainer">
        <div class="sub-tabs" id="subTabs">
            <!-- Sub-tabs will be loaded here -->
        </div>
    </div>

    <div class="container" id="mainContent">
        <div class="comics-grid" id="comicsList">
            <!-- Comics will be loaded here -->
        </div>

        <div class="about-section">
            <h2>About Evan</h2>
            <p>
                Meet Evan, an 11-year-old comic artist from San Diego, California!
                Evan creates hilarious and imaginative adventures featuring Dan and friends.
                From epic battles to everyday funnies, each comic is bursting with creativity and humor.
                Dive into the wild world of The Dan Comics and discover what happens when imagination knows no bounds!
            </p>
        </div>
    </div>

    <div class="footer">
        Created in San Diego, CA ‚òÄÔ∏è<br>
        ¬© 2026 Dan (creator of Dan Comic). All rights reserved.
    </div>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <button class="lightbox-close" onclick="closeLightbox()">‚úï Close</button>
        <button class="lightbox-nav lightbox-prev" onclick="navigateComic(-1)">‚Üê</button>
        <button class="lightbox-nav lightbox-next" onclick="navigateComic(1)">‚Üí</button>
        <div class="lightbox-content">
            <img id="lightboxImg" src="" alt="Comic">
        </div>
    </div>

    <script>
        // Comic series data structure
        let comicSeries = [];
        let currentComics = [];
        let currentComicIndex = 0;
        let currentSeries = null;
        let currentSubFolder = null;

        // GitHub repository information
        const GITHUB_REPO_OWNER = 'dan-comics';
        const GITHUB_REPO_NAME = 'dan-comics.github.io';
        const GITHUB_API_BASE = 'https://api.github.com';

        // Series configuration with icons and colors
        const seriesConfig = {
            'Origional Dan': { icon: '‚≠ê', color: '#FF6B6B', background: null },
            'Dan Funnies': { icon: 'üòÇ', color: '#4ECDC4', background: null },
            'Cheez Dame': { icon: 'üßÄ', color: '#FFD93D', background: null },
            'Dan Music': { icon: 'üéµ', color: '#95E1D3', background: null },
            'Dan Ice cream': { icon: 'üç¶', color: '#F38181', background: null },
            'Dan Shorts': { icon: 'üé¨', color: '#AA96DA', background: null },
            'Dan Science': { icon: 'üî¨', color: '#FCBAD3', background: null },
            'Dan Character': { icon: 'üë•', color: '#FFA07A', background: null },
            'FLL - Band of Bots': { icon: 'ü§ñ', color: '#5C6BC0', background: 'Website/FLL - Band of Bots/Background.JPG' },
            'More Series Here': { icon: '‚ú®', color: '#A8E6CF', background: null }
        };

        // Initialize the page
        async function init() {
            await loadSeriesFromGitHub();
            renderTabs();

            // Load first series by default
            if (comicSeries.length > 0) {
                await loadSeries(comicSeries[0]);
            }
        }

        // Load series folders dynamically from GitHub
        async function loadSeriesFromGitHub() {
            try {
                const url = `${GITHUB_API_BASE}/repos/${GITHUB_REPO_OWNER}/${GITHUB_REPO_NAME}/contents/Website`;
                const response = await fetch(url);

                if (!response.ok) {
                    console.error('Failed to load from GitHub, using fallback');
                    loadFallbackSeries();
                    return;
                }

                const items = await response.json();
                const folders = items.filter(item => item.type === 'dir');

                // Create series array from discovered folders
                comicSeries = await Promise.all(folders.map(async folder => {
                    const folderName = folder.name;
                    const config = seriesConfig[folderName] || {
                        icon: 'üìö',
                        color: getRandomColor(),
                        background: null
                    };

                    // Check for subfolders
                    const subFolders = await getSubFolders(folderName);

                    return {
                        name: folderName,
                        folder: folderName,
                        color: config.color,
                        icon: config.icon,
                        background: config.background,
                        subFolders: subFolders
                    };
                }));

                console.log('Loaded series from GitHub:', comicSeries);
            } catch (error) {
                console.error('Error loading series from GitHub:', error);
                loadFallbackSeries();
            }
        }

        // Get subfolders for a series
        async function getSubFolders(seriesFolder) {
            try {
                const url = `${GITHUB_API_BASE}/repos/${GITHUB_REPO_OWNER}/${GITHUB_REPO_NAME}/contents/Website/${encodeURIComponent(seriesFolder)}`;
                const response = await fetch(url);

                if (!response.ok) return [];

                const items = await response.json();
                const folders = items.filter(item => item.type === 'dir');

                return folders.map(folder => ({
                    name: folder.name,
                    path: `${seriesFolder}/${folder.name}`
                }));
            } catch (error) {
                console.error('Error loading subfolders:', error);
                return [];
            }
        }

        // Fallback series if GitHub API fails
        function loadFallbackSeries() {
            comicSeries = [
                { name: "Origional Dan", folder: "Origional Dan", color: "#FF6B6B", icon: "‚≠ê", background: null, subFolders: [] },
                { name: "Dan Funnies", folder: "Dan Funnies", color: "#4ECDC4", icon: "üòÇ", background: null, subFolders: [] },
                { name: "Cheez Dame", folder: "Cheez Dame", color: "#FFD93D", icon: "üßÄ", background: null, subFolders: [] },
                { name: "Dan Music", folder: "Dan Music", color: "#95E1D3", icon: "üéµ", background: null, subFolders: [] },
                { name: "Dan Ice cream", folder: "Dan Ice cream", color: "#F38181", icon: "üç¶", background: null, subFolders: [] },
                { name: "Dan Shorts", folder: "Dan Shorts", color: "#AA96DA", icon: "üé¨", background: null, subFolders: [] },
                { name: "Dan Science", folder: "Dan Science", color: "#FCBAD3", icon: "üî¨", background: null, subFolders: [] },
                { name: "Dan Character", folder: "Dan Character", color: "#FFA07A", icon: "üë•", background: null, subFolders: [] },
                { name: "FLL - Band of Bots", folder: "FLL - Band of Bots", color: "#5C6BC0", icon: "ü§ñ", background: "Website/FLL - Band of Bots/Background.JPG", subFolders: [
                    { name: "Team Fun", path: "FLL - Band of Bots/Team Fun" },
                    { name: "The Airlock IP", path: "FLL - Band of Bots/The Airlock IP" },
                    { name: "The Band", path: "FLL - Band of Bots/The Band" }
                ]},
                { name: "More Series Here", folder: "More Series Here", color: "#A8E6CF", icon: "‚ú®", background: null, subFolders: [] }
            ];
        }

        // Generate a random color for new series
        function getRandomColor() {
            const colors = ['#FF6B6B', '#4ECDC4', '#FFD93D', '#95E1D3', '#F38181', '#AA96DA', '#FCBAD3', '#A8E6CF'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // Render main tabs
        function renderTabs() {
            const mainTabs = document.getElementById('mainTabs');
            mainTabs.innerHTML = '';

            comicSeries.forEach((series, index) => {
                const tab = document.createElement('button');
                tab.className = 'tab-button';
                tab.style.borderBottomColor = series.color;
                tab.innerHTML = `<span class="tab-icon">${series.icon}</span>${series.name}`;
                tab.onclick = () => loadSeries(series);

                mainTabs.appendChild(tab);
            });
        }

        // Load a series
        async function loadSeries(series) {
            currentSeries = series;
            currentSubFolder = null;

            // Update active tab
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            event.target.closest('.tab-button').classList.add('active');

            // Apply custom background if exists
            if (series.background) {
                document.body.classList.add('custom-bg');
                document.body.style.backgroundImage = `url('${series.background}')`;
            } else {
                document.body.classList.remove('custom-bg');
                document.body.style.backgroundImage = '';
            }

            // Show/hide sub-tabs
            const subTabContainer = document.getElementById('subTabContainer');
            if (series.subFolders && series.subFolders.length > 0) {
                renderSubTabs(series.subFolders);
                subTabContainer.classList.add('active');
                // Load first subfolder by default
                await loadSubFolder(series.subFolders[0]);
            } else {
                subTabContainer.classList.remove('active');
                // Load comics from main folder
                await loadComics(series.folder);
            }
        }

        // Render sub-tabs
        function renderSubTabs(subFolders) {
            const subTabs = document.getElementById('subTabs');
            subTabs.innerHTML = '';

            subFolders.forEach(subFolder => {
                const tab = document.createElement('button');
                tab.className = 'sub-tab-button';
                tab.textContent = subFolder.name;
                tab.onclick = () => loadSubFolder(subFolder);

                subTabs.appendChild(tab);
            });
        }

        // Load a subfolder
        async function loadSubFolder(subFolder) {
            currentSubFolder = subFolder;

            // Update active sub-tab
            document.querySelectorAll('.sub-tab-button').forEach(btn => btn.classList.remove('active'));
            event.target.closest('.sub-tab-button').classList.add('active');

            // Load comics from subfolder
            await loadComics(subFolder.path);
        }

        // Load comics for a folder path
        async function loadComics(folderPath) {
            const comicsList = document.getElementById('comicsList');
            comicsList.innerHTML = '<div class="loading">Loading comics...</div>';

            const comics = await getComicsForFolder(folderPath);
            currentComics = comics;

            comicsList.innerHTML = '';

            if (comics.length === 0) {
                comicsList.innerHTML = '<div class="empty-message">No comics found in this folder yet!</div>';
                return;
            }

            comics.forEach((comic, index) => {
                const card = document.createElement('div');
                card.className = 'comic-card';
                card.onclick = () => openLightbox(index);

                const img = document.createElement('img');
                img.src = comic.path;
                img.alt = comic.title;
                img.loading = 'lazy';
                img.onerror = function() {
                    this.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="300" height="350"%3E%3Crect fill="%23ddd" width="300" height="350"/%3E%3Ctext x="50%25" y="50%25" font-size="20" text-anchor="middle" fill="%23666"%3EImage not found%3C/text%3E%3C/svg%3E';
                };

                const titleDiv = document.createElement('div');
                titleDiv.className = 'comic-title';
                titleDiv.textContent = comic.title;

                card.appendChild(img);
                card.appendChild(titleDiv);
                comicsList.appendChild(card);
            });

            // Scroll to comics
            comicsList.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Get comics for a folder path
        async function getComicsForFolder(folderPath) {
            try {
                const url = `${GITHUB_API_BASE}/repos/${GITHUB_REPO_OWNER}/${GITHUB_REPO_NAME}/contents/Website/${encodeURIComponent(folderPath)}`;
                const response = await fetch(url);

                if (!response.ok) {
                    console.error('Failed to load comics from GitHub for', folderPath);
                    return [];
                }

                const items = await response.json();

                // Filter to only image files (jpeg, jpg, png, gif, pdf) and exclude Background.JPG
                const imageExtensions = ['.jpeg', '.jpg', '.png', '.gif', '.pdf'];
                const imageFiles = items.filter(item => {
                    if (item.type !== 'file') return false;
                    if (item.name === 'Background.JPG') return false; // Exclude background image
                    const ext = item.name.toLowerCase().substring(item.name.lastIndexOf('.'));
                    return imageExtensions.includes(ext);
                });

                // Convert to comic objects
                const comics = imageFiles.map(file => ({
                    title: file.name.replace(/\.(jpeg|jpg|png|gif|pdf)$/i, ''),
                    path: `Website/${folderPath}/${file.name}`
                }));

                console.log(`Loaded ${comics.length} comics from ${folderPath}:`, comics);
                return comics;

            } catch (error) {
                console.error('Error loading comics from GitHub:', error);
                return [];
            }
        }

        // Open lightbox
        function openLightbox(index) {
            currentComicIndex = index;
            const comic = currentComics[index];

            document.getElementById('lightboxImg').src = comic.path;
            document.getElementById('lightbox').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close lightbox
        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Navigate between comics in lightbox
        function navigateComic(direction) {
            currentComicIndex += direction;

            if (currentComicIndex < 0) {
                currentComicIndex = currentComics.length - 1;
            } else if (currentComicIndex >= currentComics.length) {
                currentComicIndex = 0;
            }

            const comic = currentComics[currentComicIndex];
            document.getElementById('lightboxImg').src = comic.path;
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('lightbox').classList.contains('active')) {
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    navigateComic(-1);
                } else if (e.key === 'ArrowRight') {
                    navigateComic(1);
                }
            }
        });

        // Close lightbox when clicking outside image
        document.getElementById('lightbox').addEventListener('click', (e) => {
            if (e.target.id === 'lightbox') {
                closeLightbox();
            }
        });

        // Initialize on page load
        init();
    </script>
</body>
</html>
